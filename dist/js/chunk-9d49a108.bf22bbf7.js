(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d49a108"],{"305b":function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"secure"},[e("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.back}}),e("BgBox",[e("div",{staticClass:"cell-box"},[e("van-cell",{attrs:{title:"修改密码","is-link":"",center:!0},on:{click:t.openPasswordBox}}),e("van-cell",{attrs:{title:"注销账号","is-link":"",center:!0},on:{click:t.destroyAccount}})],1)]),e("div",{staticClass:"logout-box"},[e("van-button",{attrs:{color:"#0C34BA",block:"",round:""},on:{click:t.logout}},[t._v("退出登录")])],1),e("van-popup",{attrs:{"is-link":"",position:"bottom",closeable:""},model:{value:t.isOpen,callback:function(o){t.isOpen=o},expression:"isOpen"}},[e("div",{staticClass:"form-box"},[e("div",{staticClass:"form-title"},[t._v("修改密码")]),e("van-form",[e("van-field",{attrs:{type:t.isPassword?"password":"text",name:"旧密码",label:"旧密码",placeholder:"旧密码(首字符必须为字母)","right-icon":t.isPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleType},model:{value:t.password.oldPassword,callback:function(o){t.$set(t.password,"oldPassword",o)},expression:"password.oldPassword"}}),e("van-field",{attrs:{type:t.isPassword?"password":"text",name:"新密码",label:"新密码",placeholder:"新密码(首字符必须为字母)","right-icon":t.isPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleType},model:{value:t.password.newPassword,callback:function(o){t.$set(t.password,"newPassword",o)},expression:"password.newPassword"}}),e("div",{staticClass:"commit-btn"},[e("van-button",{attrs:{round:"",block:"",color:"#0C34BA"},on:{click:t.commit}},[t._v("提交")])],1)],1)],1)])],1)},a=[],n=(e("d42c"),e("928f")),r=e("e3a8"),i={name:"Secure",components:{BgBox:n["a"]},data:function(){return{isOpen:!1,isPassword:!0,password:{oldPassword:"",newPassword:""}}},methods:{back:function(){this.$router.go(-1)},toggleType:function(){this.isPassword=!this.isPassword},openPasswordBox:function(){this.isOpen=!0},destroyAccount:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"是否确定注销账号，一旦注销无法恢复！",confirmButtonColor:"#0C34BA"}).then((function(){var o=localStorage.getItem("__tk");if(!o)return t.$toast("请先登录"),t.$router.push({name:"Login"});t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:o}}).then((function(o){t.$toast.clear(),700==o.data.code?t.$router.push({name:"Login"}):"G001"==o.data.code&&setTimeout((function(){localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800),t.$toast(o.data.msg)})).catch((function(o){t.$toast.clear()}))})).catch((function(t){}))},logout:function(){var t=this;this.$dialog.confirm({title:"退出登录",message:"是否确定退出登录！",confirmButtonColor:"#0C34BA"}).then((function(){t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),setTimeout((function(){t.$toast.clear(),localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800)})).catch((function(t){}))},commit:function(){var t=this,o={oldPassword:{value:this.password.oldPassword,errorMsg:"旧密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/},newPassword:{value:this.password.newPassword,errorMsg:"新密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}},e=r["a"].valid(o);if(e){if(this.password.newPassword==this.password.oldPassword)return void this.$toast("新密码和旧密码不能相同");var s=localStorage.getItem("__tk");if(!s)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:s,password:this.password.newPassword,oldPassword:this.password.oldPassword}}).then((function(o){t.$toast.clear(),700==o.data.code?t.$router.push({name:"Login"}):"E001"==o.data.code&&setTimeout((function(){localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800),t.$toast(o.data.msg)})).catch((function(o){t.$toast.clear()}))}}}},c=i,l=e("2877"),d=Object(l["a"])(c,s,a,!1,null,"16cd6da0",null);o["default"]=d.exports},"50af":function(t,o,e){"use strict";e("775c")},"775c":function(t,o,e){},"928f":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"bg-box"},[e("div",{staticClass:"bg-content"},[t._t("default")],2)])},a=[],n={name:"BgBox"},r=n,i=(e("50af"),e("2877")),c=Object(i["a"])(r,s,a,!1,null,"0ebead96",null);o["a"]=c.exports},d42c:function(t,o,e){},e3a8:function(t,o,e){"use strict";function s(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function a(t,o){for(var e=0;e<o.length;e++){var s=o[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,o,e){return o&&a(t.prototype,o),e&&a(t,e),t}e.d(o,"a",(function(){return l}));e("e7e5");var r=e("d399"),i=e("2b0e");i["a"].use(r["a"]);var c=function(){function t(){s(this,t)}return n(t,[{key:"valid",value:function(t){for(var o in t)if(!t[o].reg.test(t[o].value))return Object(r["a"])(t[o].errorMsg),!1;return!0}}]),t}(),l=new c}}]);
//# sourceMappingURL=chunk-9d49a108.bf22bbf7.js.map